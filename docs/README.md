# Documentation Index

Welcome to the HistText Documentation. This directory (`docs/`) contains various guides, references, and technical documentation to help users and developers work with the HistText project. Below is an overview of what each document covers, and instructions on how to view and contribute to the documentation.

## Documentation Contents

### API Documentation (`api/`):
This section will contain OpenAPI/Swagger specifications for HistText's REST API. It describes all available endpoints, request/response schemas, and error codes.

Status: The OpenAPI docs are generated by the backend at runtime. For the latest API details, run the app and access the Swagger UI (see usage in the main README). 

### Administrator Guide (`admin_setup/`):
Step-by-step instructions for system administrators to deploy and configure HistText. This includes production setup tips, environment variable configurations, backup strategies, and integration with external services.

Status: Covers installation (from the main README) and additional admin tasks like user management, updating the application, etc.

### Backend Documentation (`backend/`):
In-depth documentation of the Rust backend. This may include:
- API endpoint documentation (beyond the auto-generated OpenAPI, e.g., explanation of each endpoint's purpose and usage examples).
- Developer notes on the backend architecture, module structure, and coding guidelines.
- If the Rust code has embedded documentation (via rustdoc), it might be published here for easy browsing (e.g., backend/HistTextWeb/ contain HTML).

### Database Schema (`database/`):
Documentation of the PostgreSQL database schema. Describes each table, column, and their relationships. Useful for developers directly querying the DB or modifying schema. It may include entity-relationship diagrams or Diesel schema outputs.

### Python Toolkit (`toolkit/`):
Documentation for the Python toolkit that complements HistText. This toolkit allow data scientists or researchers to connect to the HistText database/index and perform advanced analysis in Python (for instance, running custom NLP pipelines on texts, or batch querying). The docs here would explain how to install the Python package, its API usage, and examples.

Note: You should refer to the documentation that is in the toolkit folder directly.

## Viewing the Documentation

All documentation is written in Markdown/Html and kept in this repository. You can view it directly by browsing to the respective files or directories mentioned above. 

For a better reading experience, you can use VS Code or another markdown reader to navigate the docs locally. Simply clone the repository and open the .md files in the docs/ folder.

> Tip: Some documentation sections (like the API docs) might include diagrams or require viewing a rendered version for best effect. GitHub will render Mermaid diagrams and other embedded content automatically. If something isn't displaying (for example, because GitHub doesn't render certain advanced features), consider using a markdown preview extension or tool that supports those features.

There is currently no separate published website for the documentation (such as ReadTheDocs or GitHub Pages). We may consider generating a static documentation site from these files if the project grows.

For now, GitHub is the primary way to access the docs.

## Generating Documentation

Some parts of the documentation can be generated or updated from the source code:

- OpenAPI Specification: The backend can output an OpenAPI JSON specification of the API. To get the latest version:
  - Run the HistText backend with DO_OPENAPI=true.
  - Access the OpenAPI JSON directly (you might navigate to an endpoint like http://localhost:8000/api-docs or check network calls from the Swagger UI to find the JSON URL).
  - Save this JSON or YAML. This can be placed or updated in docs/api/histtext-openapi.yaml. (At the moment, this may be done manually. In the future, we might automate exporting the spec as part of release process.)

- Rust doc (backend API): You can generate developer documentation from Rust code by running `cargo doc`. This will produce HTML documentation for all modules and functions. We might include certain important excerpts in docs/backend/ or host the docs via GitHub Pages for the crate. As of now, developers should refer to the code or generate docs locally.

- Database schema diagrams: If we use tools to generate ER diagrams or schema descriptions (for example, Diesel print schema, or an external tool), we will update the contents in docs/database/. Contributors can regenerate these if schema changes, using their tool of choice.

- Diagrams (Mermaid): This documentation uses Mermaid for architecture and other diagrams. To update a diagram, edit the Mermaid code in the markdown. When viewing on GitHub or a compatible viewer, it will render automatically. We keep the diagram source in the docs for easy maintenance.

## Contributing to Documentation

We strongly encourage contributions to improve and update the documentation. Here's how you can help:

- Fix Typos/Errors: If you find any inaccuracies or typos, feel free to open a pull request with corrections.
- Clarify Instructions: If a setup step was confusing or a prerequisite was missing in the docs, please update the docs to clarify it. For example, if you needed an extra system package for installation that wasn't mentioned, adding that to the Requirements or Troubleshooting would help others.
- Update for Code Changes: When you contribute code that changes functionality or adds a new feature, update the relevant docs in the same PR. E.g., if you add a new API endpoint, document it in the OpenAPI spec or relevant markdown. If you change an environment variable or config, ensure the README and docs reflect that.
- New Documentation: If you feel an area lacks documentation (for instance, a how-to guide for a user persona, or a tutorial), you can propose it. We can add new files under docs/ as needed.

Writing Guidelines: We aim for clarity and accessibility in documentation:
- Use simple language and short paragraphs to explain concepts.
- Organize content with headings and lists so readers can scan sections.
- When referring to code or commands, use backticks for inline code and triple backticks for multi-line blocks (with language hints for syntax highlighting, e.g., `shell` for commands, `rust` for code).
- Include examples wherever appropriate (command examples, snippet of output, config file sample, etc.).
- Keep a professional and helpful tone.

Before merging documentation changes, maintainers will review for accuracy (especially if describing code behavior). Don't be discouraged by suggestions – our goal is to keep the docs precise and useful.

## Keeping Docs Up-To-Date

The documentation should always reflect the current state of the project (to avoid the scenario where features are described that haven't been implemented or have changed).

- Sections marked with "planned" or "to be developed" (TODOs) indicate features or components that are not yet fully implemented as of the latest release. We include them for transparency and to outline our roadmap, but make sure readers know they might not find those features in the application yet.
- After a release, we will review and update the docs to match the release. If you are using a development (unreleased) version from the main branch, note that the docs might include some forward-looking information. Check the release notes or commit history if something is confusing.

If you spot a discrepancy between the code and the docs, it's likely an oversight – please bring it up!

## Viewing OpenAPI/Swagger UI

As mentioned, the easiest way to see the API documentation is via the running app's Swagger UI. However, if you prefer not to run the app and just want to read the API spec:
- We intend to maintain an updated histtext-openapi.yaml and others in docs/api/ once the API stabilizes. You can open that file in an editor or an online Swagger viewer.
- For now, if that file is not present or up-to-date, running the app is the source of truth.

Once the histtext-openapi.yaml is available, you could use tools like:
```bash
npm install -g @redocly/cli
redocly preview-docs docs/api/histtext-openapi.yaml
```
to preview a nicely formatted API reference in your browser.

(The above is just an example using Redoc CLI, there are many ways to view OpenAPI specs.)

## Additional Resources

- Project README: The main README.md at the root of the repository is the first stop for new users. It contains the quickstart and essential info. This docs/ folder provides more detail and is structured by topic.
- Roadmap: See ROADMAP.md for planned features. It can give context on sections of the docs that mention future plans.

By maintaining and improving this documentation, we ensure that HistText is accessible to its users (historians, researchers, developers) and that adopting or contributing to it is as smooth as possible.

Thank you for reading and/or contributing to the docs!

Last updated: May 2025 (for HistText v1.0.0). If you're reading this at a later date, consult the repository for any newer updates.